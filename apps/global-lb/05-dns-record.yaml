apiVersion: redhatcop.redhat.io/v1alpha1
kind: GlobalDNSRecord
metadata:
  name: workload-global-record
  annotations:
    argocd.argoproj.io/sync-wave: "5"
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
spec:
  name: devconf-vrutkovs-demo.devcluster.openshift.com
  endpoints:
  - clusterName: prodeu
    clusterCredentialRef:
      name: admin-kubeconfig
      namespace: clusters-vrutkovs-prod-eu
    loadBalancerServiceRef:
      name: router-default
      namespace: openshift-ingress
  - clusterName: produs
    clusterCredentialRef:
      name: admin-kubeconfig
      namespace: clusters-vrutkovs-prod-us
    loadBalancerServiceRef:
      name: router-default
      namespace: openshift-ingress
  - clusterName: hub
    clusterCredentialRef:
      name: hub-kubeconfig
      namespace: local-cluster
    loadBalancerServiceRef:
      name: router-default
      namespace: openshift-ingress
  ttl: 60
  loadBalancingPolicy: Latency
  globalZoneRef:
    name: external-dns-zone
  healthCheck:
    failureThreshold: 3
    httpGet:
      host: devconf-vrutkovs-demo.devcluster.openshift.com
      path: /
      port: 80
      scheme: HTTP
    periodSeconds: 10
    successThreshold: 1
    timeoutSeconds: 1
